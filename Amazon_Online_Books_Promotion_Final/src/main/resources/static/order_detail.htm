<!DOCTYPE html>
<html>

<head>
    <title>订单详情</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- jquery -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <!-- bootstrap -->
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css" />
    <script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
    <!-- jquery-validator -->
    <script type="text/javascript" src="/jquery-validation/jquery.validate.min.js"></script>
    <script type="text/javascript" src="/jquery-validation/localization/messages_zh.min.js"></script>
    <!-- layer -->
    <script type="text/javascript" src="/layer/layer.js"></script>
    <!-- md5.js -->
    <script type="text/javascript" src="/js/md5.min.js"></script>
    <!-- common.js -->
    <script type="text/javascript" src="/js/common.js"></script>
    <!-- css -->
    <link rel="stylesheet" type="text/css"src=/css/order_detail.css />
</head>

<body>
	<nav class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">商城</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav pull-right">
					<li><a id="nickName"></a></li>
					<li id="navTip"></li>
				</ul>
			</div>
		</div>
	</nav>
    <div class="container">
        <div class="text">
            <h1>订单详情</h1>
        </div>
        <div class="panel panel-default">
            <table class="table list" id="goodslist">
                <tr class="well">
                    <td>图书图片</td>
                    <td>图书名称</td>
                    <td>秒杀价</td>
                    <td>下单时间</td>
                </tr>
                <tr>
                    <td> <img class="book" width="15%" id="goodsImg" />
                    </td>
                    <td id="goodsName"></td>
                    <td id="goodsPrice"></td>
                    <td id="createDate"></td>
                </tr>
            </table>
        </div>
        <td>
            <div class="pull-right">
                <a class="btn btn-danger btn-lg btn-block" href="/miaosha/success/">立即支付</a>
            </div>
        </td>
    </div>

</body>
<script>
    function render(detail){
        var goods = detail.goods;
        var order = detail.order;
        $("#goodsName").text(goods.goodsName);
        $("#goodsImg").attr("src", goods.goodsImg);
        $("#goodsPrice").text(order.goodsPrice);
        $("#createDate").text(new Date(order.createDate).format("yyyy-MM-dd hh:mm:ss"));     
    }
    
    $(function(){
        getOrderDetail();
    })
    
    function getOrderDetail(){
        var orderId = g_getQueryString("orderId");
        $.ajax({
            url:"/order/detail",
            type:"GET",
            data:{
                orderId:orderId
            },
            success:function(data){
                if(data.code == 0){
                    render(data.data);
                }else{
                    layer.msg(data.msg);
                }
            },
            error:function(){
                layer.msg("客户端请求有误");
            }
        });
    }
</script>
</html>